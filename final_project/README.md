# 用C++設計一個 HackCPU的組譯器

## 執行
$ `g++ myasm.cpp`
產生執行檔 a.exe

需要先下載範例[sum.asm](https://github.com/KimLinTW/co111a/blob/main/final_project/sum.asm)

$ `.\a.exe sum`

### 輸出

```txt
============= PASS1 ================
00:@10
01:D=A
02:@0
03:M=D
04:@i
05:M=1
06:@sum
07:M=0
08:(LOOP)
symbol:LOOP address=8
08:@i
09:D=M
10:@R0
11:D=D-M
12:@STOP
13:D;JGT
14:@i
15:D=M
16:@sum
17:M=D+M
18:@i
19:M=M+1
20:@LOOP
21:0;JMP
22:(STOP)
symbol:STOP address=22
22:@sum
23:D=M
24:@R1
25:M=D
============= PASS2 ================
00: @10                 0000000000001010 000a
01: D=A                 1110110000010000 ec10
02: @0                  0000000000000000 0000
03: M=D                 1110001100001000 e308
04: @i                  0000000000010000 0010
05: M=1                 1110111111001000 efc8
06: @sum                0000000000010001 0011
07: M=0                 1110101010001000 ea88 
(LOOP)
08: @i                  0000000000010000 0010
09: D=M                 1111110000010000 fc10
0A: @R0                 0000000000000000 0000
0B: D=D-M               1111010011010000 f4d0
0C: @STOP               0000000000010110 0016
0D: D;JGT               1110001100000001 e301
0E: @i                  0000000000010000 0010
0F: D=M                 1111110000010000 fc10
10: @sum                0000000000010001 0011
11: M=D+M               1111000010001000 f088
12: @i                  0000000000010000 0010
13: M=M+1               1111110111001000 fdc8
14: @LOOP               0000000000001000 0008
15: 0;JMP               1110101010000111 ea87
(STOP)
16: @sum                0000000000010001 0011 
17: D=M                 1111110000010000 fc10
18: @R1                 0000000000000001 0001
19: M=D                 1110001100001000 e308
```

pass1 : 清除sum.asm中的註解及空行 並以十進制從0開始編號

pass2 :  

### 輸出.hack檔

```=
0000000000001010
1110110000010000
0000000000000000
1110001100001000
0000000000010000
1110111111001000
0000000000010001
1110101010001000
0000000000010000
1111110000010000
0000000000000000
1111010011010000
0000000000010110
1110001100000001
0000000000010000
1111110000010000
0000000000010001
1111000010001000
0000000000010000
1111110111001000
0000000000001000
1110101010000111
0000000000010001
1111110000010000
0000000000000001
1110001100001000

```

### 輸出.bin檔

![sum.bin](https://i.imgur.com/kiJiAmK.png)